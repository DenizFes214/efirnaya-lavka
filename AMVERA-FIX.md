# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º —Å AMVERA deployment

## ‚ùå –û–±–Ω–∞—Ä—É–∂–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:

### 1. **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç `amvera.yml`**

**–ü—Ä–æ–±–ª–µ–º–∞:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è –Ω–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
```yaml
runtime: docker          # ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û –¥–ª—è Docker
command: node            # ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û
args:                    # ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û
  - backend/server.js
```

**–ü—Ä–∏—á–∏–Ω–∞:** –°–æ–≥–ª–∞—Å–Ω–æ [–æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ AMVERA](https://docs.amvera.ru/applications/configuration/docker.html), –¥–ª—è Docker –æ–∫—Ä—É–∂–µ–Ω–∏—è –Ω—É–∂–Ω–∞ —Å–æ–≤–µ—Ä—à–µ–Ω–Ω–æ –¥—Ä—É–≥–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–∞.

**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –¥–ª—è Docker:
```yaml
meta:
  environment: docker
  toolchain:
    name: docker

build:
  # Dockerfile –±—É–¥–µ—Ç –Ω–∞–π–¥–µ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

run:
  containerPort: 80       # ‚úÖ –£–∫–∞–∑—ã–≤–∞–µ–º –ø–æ—Ä—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
  persistenceMount: /data # ‚úÖ –ú–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–≥–æ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞

env:
  - name: NODE_ENV
    value: production
  # –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ...
```

### 2. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ curl –≤ Docker –æ–±—Ä–∞–∑–µ**

**–ü—Ä–æ–±–ª–µ–º–∞:** Healthcheck –≤ Dockerfile –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª curl, –Ω–æ –ø–∞–∫–µ—Ç –Ω–µ –±—ã–ª —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
```dockerfile
HEALTHCHECK --interval=30s --timeout=3s --start-period=5s --retries=3 \
  CMD curl -f http://localhost:80/api/health || exit 1
```

**–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–ª–µ–Ω curl –≤ —Å–∏—Å—Ç–µ–º–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
```dockerfile
RUN apt-get update && apt-get install -y \
    python3 \
    make \
    g++ \
    curl \              # ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω curl
    && rm -rf /var/lib/apt/lists/*
```

## ‚úÖ –ß—Ç–æ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:

1. **`amvera.yml`** - –ø–µ—Ä–µ–ø–∏—Å–∞–Ω –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ –¥–ª—è Docker
2. **`Dockerfile`** - –¥–æ–±–∞–≤–ª–µ–Ω –ø–∞–∫–µ—Ç `curl` –¥–ª—è healthcheck

## üìö –°–ø—Ä–∞–≤–∫–∞ –ø–æ AMVERA Docker –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:

### –û—Å–Ω–æ–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã `run`:

- **`containerPort`** - –ø–æ—Ä—Ç, –∫–æ—Ç–æ—Ä—ã–π —Å–ª—É—à–∞–µ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 80)
- **`persistenceMount`** - –ø—É—Ç—å –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–≥–æ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `/data`)
- **`command`** - –∫–æ–º–∞–Ω–¥–∞ –¥–ª—è –∑–∞–ø—É—Å–∫–∞ (–µ—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω–∞ –≤ Dockerfile)
- **`args`** - –∞—Ä–≥—É–º–µ–Ω—Ç—ã –∫–æ–º–∞–Ω–¥—ã (–µ—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω—ã –≤ Dockerfile)
- **`image`** - –≥–æ—Ç–æ–≤—ã–π –æ–±—Ä–∞–∑ Docker (–¥–ª—è –ø—Ä–æ–ø—É—Å–∫–∞ —Å–±–æ—Ä–∫–∏)

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞–ø–æ–∫ AMVERA:

1. **`/code`** - –∏—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ –∏–∑ git —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
2. **`/data`** - –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ (–Ω–µ –∑–∞—Ç–∏—Ä–∞–µ—Ç—Å—è –ø—Ä–∏ –ø–µ—Ä–µ—Å–±–æ—Ä–∫–µ)
3. **`/app`** - —Ä–∞–±–æ—á–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ

### –í–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã:

- ‚úÖ Docker –æ–±—Ä–∞–∑ —Å–æ–±–∏—Ä–∞–µ—Ç—Å—è –∏–∑ Dockerfile –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- ‚úÖ –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏–∑ `env:` –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
- ‚úÖ HEALTHCHECK –≤ Dockerfile —Ä–∞–±–æ—Ç–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- ‚ùå `docker-compose.yml` –ù–ï –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è
- ‚ùå Healthcheck –≤ `amvera.yml` –¥–ª—è Docker –ù–ï –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:

1. ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤–Ω–µ—Å–µ–Ω—ã –≤ –∫–æ–¥
2. ‚è≥ –ó–∞–∫–æ–º–º–∏—Ç–∏—Ç—å –∏ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –≤ git
3. ‚è≥ AMVERA –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ—Å–æ–±–µ—Ä–µ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
4. ‚è≥ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ —Å–±–æ—Ä–∫–∏ –≤ –ø–∞–Ω–µ–ª–∏ AMVERA
5. ‚è≥ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É –ø–æ –∞–¥—Ä–µ—Å—É https://efirnayalavka-aleksei57.amvera.io

## üìñ –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏:

- [Docker –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è AMVERA](https://docs.amvera.ru/applications/configuration/docker.html)
- [–ü—Ä–æ—Ü–µ—Å—Å –∑–∞–ø—É—Å–∫–∞](https://docs.amvera.ru/applications/run.html)
- [–•—Ä–∞–Ω–∏–ª–∏—â–µ –∏ –ø—É—Ç–∏](https://docs.amvera.ru/applications/storage.html)
- [–ß–∞—Å—Ç—ã–µ –æ—à–∏–±–∫–∏](https://docs.amvera.ru/general/faq.html)
- [502/503 –æ—à–∏–±–∫–∏](https://docs.amvera.ru/general/FAQ/502-503-error.html)

---

**–î–∞—Ç–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:** 17 –Ω–æ—è–±—Ä—è 2025 –≥.
