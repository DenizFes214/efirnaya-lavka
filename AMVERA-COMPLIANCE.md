# üìã –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–º —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º AMVERA

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ AMVERA

### üìÇ –ü–∞–ø–∫–∞ Code (Git Repository)
**–°—Ç–∞—Ç—É—Å: ‚úÖ –°–û–û–¢–í–ï–¢–°–¢–í–£–ï–¢**

–í git-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –Ω–∞—Ö–æ–¥—è—Ç—Å—è —Ç–æ–ª—å–∫–æ —Ñ–∞–π–ª—ã –∫–æ–¥–∞ –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:
- ‚úÖ –ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (`backend/`, `frontend/`, `nginx/`)
- ‚úÖ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã (`amvera.yml`, `Dockerfile`, `package.json`)
- ‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (`README.md`, `INSTALL.md`)
- ‚úÖ –§–∞–π–ª—ã —Å–±–æ—Ä–∫–∏ (`.dockerignore`, `.gitignore`)
- ‚ùå **–ù–ï–¢** –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö (–±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö, uploads, –ª–æ–≥–æ–≤)
- ‚ùå **–ù–ï–¢** –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ (`node_modules`, `*.log`, `*.tmp`)

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
```gitignore
# .gitignore –∏ .dockerignore –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∏—Å–∫–ª—é—á–∞—é—Ç:
data/
uploads/
*.sqlite
*.log
node_modules/
```

### üíæ –ü–∞–ø–∫–∞ Data (–ü–æ—Å—Ç–æ—è–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ)
**–°—Ç–∞—Ç—É—Å: ‚úÖ –°–û–û–¢–í–ï–¢–°–¢–í–£–ï–¢**

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ AMVERA:** 
> "–í –∫–æ–¥–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –ø—É—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –≤ –¥–∞–Ω–Ω—É—é –ø–∞–ø–∫—É –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∞–±—Å–æ–ª—é—Ç–Ω—ã–π. –ù–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è —Å–ª—É—á–∞—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é /data –ø—É—Ç—å –≤ –∫–æ–¥–µ –±—É–¥–µ—Ç: /data/<filename>"

**–ù–∞—à–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
```javascript
// ‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö - –∞–±—Å–æ–ª—é—Ç–Ω—ã–π –ø—É—Ç—å
const dbPath = process.env.DB_PATH || '/data/efirnaya-lavka.sqlite';

// ‚úÖ –ó–∞–≥—Ä—É–∑–∫–∏ - –∞–±—Å–æ–ª—é—Ç–Ω—ã–π –ø—É—Ç—å  
const uploadDir = process.env.UPLOADS_PATH || '/data/uploads';

// ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π
mkdirSync('/data', { recursive: true });
await mkdir('/data/uploads', { recursive: true });
```

**–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ:** –í—Å–µ –¥–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ `/data/`:
- `/data/efirnaya-lavka.sqlite` - –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö SQLite
- `/data/uploads/` - –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è amvera.yml
**–°—Ç–∞—Ç—É—Å: ‚úÖ –°–û–û–¢–í–ï–¢–°–¢–í–£–ï–¢**

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ AMVERA:** 
> "–ü–∞–ø–∫–∞ Data –º–æ–Ω—Ç–∏—Ä—É–µ—Ç—Å—è –≤ –∑–∞–ø—É—Å–∫–∞–µ–º—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –≤ –ø—É—Ç—å, —É–∫–∞–∑–∞–Ω–Ω—ã–π –≤ —Ñ–∞–π–ª–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –≤ run.persistenceMount (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é /data)"

**–ù–∞—à–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:**
```yaml
runtime: docker
run:
  persistenceMount: /data  # ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç
env:
  - name: DB_PATH
    value: "/data/efirnaya-lavka.sqlite"  # ‚úÖ –ê–±—Å–æ–ª—é—Ç–Ω—ã–π –ø—É—Ç—å
  - name: UPLOADS_PATH  
    value: "/data/uploads"  # ‚úÖ –ê–±—Å–æ–ª—é—Ç–Ω—ã–π –ø—É—Ç—å
healthcheck:
  http:
    path: /api/health  # ‚úÖ Endpoint –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∑–¥–æ—Ä–æ–≤—å—è
    port: 80
```

### üê≥ Docker-–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
**–°—Ç–∞—Ç—É—Å: ‚úÖ –°–û–û–¢–í–ï–¢–°–¢–í–£–ï–¢**

**Dockerfile –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω –¥–ª—è AMVERA:**
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `node:18-bullseye-slim` –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
- ‚úÖ –ö–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç native –º–æ–¥—É–ª–∏ (better-sqlite3) –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ
- ‚úÖ –ù–µ –≤–∫–ª—é—á–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ —á–µ—Ä–µ–∑ `.dockerignore`
- ‚úÖ –°–æ–∑–¥–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤ `/app`

**–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ Code/Data:**
- `/app` (Code) - –∫–æ–¥ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏, —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã
- `/data` (Data) - –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö SQLite, –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

### üîç –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–∞—è –¥–∏–∞–≥—Ä–∞–º–º–∞
```
AMVERA Container Runtime
‚îú‚îÄ‚îÄ /app (Code - Artifacts)
‚îÇ   ‚îú‚îÄ‚îÄ package.json
‚îÇ   ‚îú‚îÄ‚îÄ backend/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ server.js
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ db.js
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ seed.js
‚îÇ   ‚îú‚îÄ‚îÄ frontend/
‚îÇ   ‚îî‚îÄ‚îÄ node_modules/
‚îî‚îÄ‚îÄ /data (Data - Persistent Storage) ‚Üê persistenceMount
    ‚îú‚îÄ‚îÄ efirnaya-lavka.sqlite
    ‚îú‚îÄ‚îÄ efirnaya-lavka.sqlite-wal
    ‚îî‚îÄ‚îÄ uploads/
        ‚îî‚îÄ‚îÄ [user files]
```

### üö´ –ß—Ç–æ –ù–ï –ø–æ–ø–∞–¥–∞–µ—Ç –≤ Code (–ø—Ä–∞–≤–∏–ª—å–Ω–æ –∏—Å–∫–ª—é—á–µ–Ω–æ)
- ‚ùå –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ (SQLite –±–∞–∑–∞)
- ‚ùå –ó–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã (`uploads/`)
- ‚ùå –õ–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (`*.log`)
- ‚ùå –í—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã (`*.tmp`, `*.temp`)
- ‚ùå –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ Node.js (`node_modules/`)
- ‚ùå –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (`.env`)

### üìä –†–µ–∑—É–ª—å—Ç–∞—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏

| –ö–∞—Ç–µ–≥–æ—Ä–∏—è | –¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ | –°—Ç–∞—Ç—É—Å |
|-----------|------------|---------|
| **Code Structure** | –¢–æ–ª—å–∫–æ –∫–æ–¥ –≤ git | ‚úÖ |
| **Data Persistence** | –ê–±—Å–æ–ª—é—Ç–Ω—ã–µ –ø—É—Ç–∏ `/data/` | ‚úÖ |
| **amvera.yml** | –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π `persistenceMount` | ‚úÖ |
| **Docker Build** | –ò—Å–∫–ª—é—á–µ–Ω–∏–µ user data | ‚úÖ |
| **Runtime** | –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ Code/Data | ‚úÖ |

## üéØ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

**‚úÖ –ü—Ä–æ–µ–∫—Ç –ü–û–õ–ù–û–°–¢–¨–Æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–º —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º AMVERA**

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Ä–∞–∑–¥–µ–ª—è–µ—Ç:
- **Code** (–∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ—Ç—Å—è git) - –∏—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥, –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è, –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- **Data** (–ø–æ—Å—Ç–æ—è–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ) - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ –≤ `/data/`

**–ì–æ—Ç–æ–≤ –∫ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é –Ω–∞ AMVERA** üöÄ

---
*–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ —Å–æ–≥–ª–∞—Å–Ω–æ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ AMVERA "–•—Ä–∞–Ω–∏–ª–∏—â–µ –∏ –ø—É—Ç–∏"*