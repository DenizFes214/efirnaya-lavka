# ğŸŒ¿ Ğ­Ñ„Ğ¸Ñ€Ğ½Ğ°Ñ Ğ›Ğ°Ğ²ĞºĞ° - Telegram MiniApp Ğ´Ğ»Ñ AMVERA

**ğŸš€ Ğ“Ğ¾Ñ‚Ğ¾Ğ² Ğº Ñ€Ğ°Ğ·Ğ²ĞµÑ€Ñ‚Ñ‹Ğ²Ğ°Ğ½Ğ¸Ñ Ğ½Ğ° AMVERA Cloud Platform**

Ğ”Ğ¾Ğ±Ñ€Ğ¾ Ğ¿Ğ¾Ğ¶Ğ°Ğ»Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ² Ğ¼Ğ°Ğ³Ğ¸Ñ Ğ°Ñ€Ğ¾Ğ¼Ğ°Ñ‚Ğ¾Ğ² Ğ¸ Ñ‚Ñ€Ğ°Ğ²! âœ¨

## ğŸ¯ Ğ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğµ

**Ğ­Ñ„Ğ¸Ñ€Ğ½Ğ°Ñ Ğ›Ğ°Ğ²ĞºĞ°** â€” Ğ¿Ğ¾Ğ»Ğ½Ğ¾Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹ Telegram MiniApp Ğ´Ğ»Ñ Ğ¿Ñ€Ğ¾Ğ´Ğ°Ğ¶Ğ¸ ÑÑ„Ğ¸Ñ€Ğ½Ñ‹Ñ… Ğ¼Ğ°ÑĞµĞ», Ñ‚Ñ€Ğ°Ğ² Ğ¸ Ğ¼Ğ°Ğ³Ğ¸Ñ‡ĞµÑĞºĞ¸Ñ… Ñ‚Ğ¾Ğ²Ğ°Ñ€Ğ¾Ğ² Ñ Ğ¼Ğ¸ÑÑ‚Ğ¸Ñ‡ĞµÑĞºĞ¾Ğ¹ Ğ°Ñ‚Ğ¼Ğ¾ÑÑ„ĞµÑ€Ğ¾Ğ¹ Ğ¸ Ğ¿Ğ¾Ğ»Ğ½Ñ‹Ğ¼ Ñ†Ğ¸ĞºĞ»Ğ¾Ğ¼ e-commerce.

### ğŸŒŸ ĞÑĞ¾Ğ±ĞµĞ½Ğ½Ğ¾ÑÑ‚Ğ¸

- **ğŸ”® ĞœĞ¸ÑÑ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ Ğ´Ğ¸Ğ·Ğ°Ğ¹Ğ½** Ñ Ğ¼Ğ°Ğ³Ğ¸Ñ‡ĞµÑĞºĞ¾Ğ¹ Ñ†Ğ²ĞµÑ‚Ğ¾Ğ²Ğ¾Ğ¹ ÑÑ…ĞµĞ¼Ğ¾Ğ¹
- **ğŸ›’ ĞŸĞ¾Ğ»Ğ½Ñ‹Ğ¹ Ğ¸Ğ½Ñ‚ĞµÑ€Ğ½ĞµÑ‚-Ğ¼Ğ°Ğ³Ğ°Ğ·Ğ¸Ğ½** Ñ ĞºĞ¾Ñ€Ğ·Ğ¸Ğ½Ğ¾Ğ¹ Ğ¸ Ğ·Ğ°ĞºĞ°Ğ·Ğ°Ğ¼Ğ¸  
- **ğŸ‘‘ ĞĞ´Ğ¼Ğ¸Ğ½-Ğ¿Ğ°Ğ½ĞµĞ»ÑŒ** Ğ´Ğ»Ñ ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ Ñ‚Ğ¾Ğ²Ğ°Ñ€Ğ°Ğ¼Ğ¸
- **ğŸ“± Telegram WebApp** Ğ¿Ğ¾Ğ»Ğ½Ğ°Ñ Ğ¸Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ñ
- **â˜ï¸ AMVERA Ğ³Ğ¾Ñ‚Ğ¾Ğ²Ğ½Ğ¾ÑÑ‚ÑŒ** Ñ Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»ÑŒĞ½Ğ¾Ğ¹ Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ¾Ğ¹
- **ğŸ³ Docker Ğ¾Ğ¿Ñ‚Ğ¸Ğ¼Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ** Ğ´Ğ»Ñ Ğ¾Ğ±Ğ»Ğ°Ñ‡Ğ½Ğ¾Ğ³Ğ¾ Ñ€Ğ°Ğ·Ğ²ĞµÑ€Ñ‚Ñ‹Ğ²Ğ°Ğ½Ğ¸Ñ

## ğŸš€ Ğ‘Ñ‹ÑÑ‚Ñ€Ğ¾Ğµ Ñ€Ğ°Ğ·Ğ²ĞµÑ€Ñ‚Ñ‹Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ½Ğ° AMVERA

### Ğ’Ğ°Ñ€Ğ¸Ğ°Ğ½Ñ‚ 1: ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ (Ñ€ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´ÑƒĞµÑ‚ÑÑ)

```bash
# Ğ—Ğ°Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚Ğµ PowerShell ÑĞºÑ€Ğ¸Ğ¿Ñ‚
.\deploy-to-amvera.ps1

# Ğ˜Ğ»Ğ¸ bash ÑĞºÑ€Ğ¸Ğ¿Ñ‚ (Linux/macOS)  
./deploy-to-amvera.sh
```

### Ğ’Ğ°Ñ€Ğ¸Ğ°Ğ½Ñ‚ 2: Ğ ÑƒÑ‡Ğ½Ğ¾Ğ¹

1. **Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ¹Ñ‚Ğµ GitHub Ñ€ĞµĞ¿Ğ¾Ğ·Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ¹:**
   - https://github.com/new
   - Ğ˜Ğ¼Ñ: `efirnaya-lavka-amvera` 
   - ĞĞ• Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ÑĞ¹Ñ‚Ğµ README/gitignore

2. **Ğ—Ğ°Ğ³Ñ€ÑƒĞ·Ğ¸Ñ‚Ğµ ĞºĞ¾Ğ´:**
   ```bash
   git remote add origin https://github.com/YOUR_USERNAME/efirnaya-lavka-amvera.git
   git push -u origin main
   ```

3. **ĞŸĞ¾Ğ´ĞºĞ»ÑÑ‡Ğ¸Ñ‚Ğµ Ğº AMVERA:**
   - https://amvera.io/ â†’ Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ
   - "Ğ˜Ğ· Git Ñ€ĞµĞ¿Ğ¾Ğ·Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ñ"
   - Ğ’ÑÑ‚Ğ°Ğ²ÑŒÑ‚Ğµ URL Ñ€ĞµĞ¿Ğ¾Ğ·Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ñ
   - Ğ’Ñ‹Ğ±ĞµÑ€Ğ¸Ñ‚Ğµ Ğ²ĞµÑ‚ĞºÑƒ `main`

> ğŸ“– **ĞŸĞ¾Ğ´Ñ€Ğ¾Ğ±Ğ½Ñ‹Ğµ Ğ¸Ğ½ÑÑ‚Ñ€ÑƒĞºÑ†Ğ¸Ğ¸:** [QUICK-DEPLOY.md](QUICK-DEPLOY.md)

## ğŸ—ï¸ ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ° AMVERA

### Code (Repository)
```
ğŸ“¦ Project Structure/
â”œâ”€â”€ ğŸ“ backend/           # Node.js + Express API
â”œâ”€â”€ ğŸ“ frontend/          # Telegram WebApp UI  
â”œâ”€â”€ ğŸ“ nginx/            # Reverse proxy config
â”œâ”€â”€ ğŸ“„ amvera.yml        # AMVERA configuration â­
â”œâ”€â”€ ğŸ“„ Dockerfile       # Optimized Docker build
â”œâ”€â”€ ğŸ“„ package.json     # Dependencies
â””â”€â”€ ğŸ“„ .gitignore/.dockerignore
```

### Data (Persistent `/data`)
```
ğŸ“ /data/                # AMVERA persistent storage
â”œâ”€â”€ ğŸ“„ efirnaya-lavka.sqlite    # SQLite database
â”œâ”€â”€ ğŸ“„ *.sqlite-wal            # Write-ahead log
â””â”€â”€ ğŸ“ uploads/                # User uploaded files
```

## âš™ï¸ Ğ¢ĞµÑ…Ğ½Ğ¸Ñ‡ĞµÑĞºĞ°Ñ ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ

### AMVERA Configuration (`amvera.yml`)
```yaml
runtime: docker
run:
  persistenceMount: /data
healthcheck:
  http:
    path: /api/health
    port: 80
env:
  - name: NODE_ENV
    value: production
  - name: DB_PATH
    value: "/data/efirnaya-lavka.sqlite"
  - name: UPLOADS_PATH  
    value: "/data/uploads"
```

### Environment Variables (Set in AMVERA panel)
```env
BOT_TOKEN=8340741653:AAGFC-nW1BnLobjhgXSKRjNY83HkU4pCqrw
ADMIN_IDS=985246360,1562870920
MAIN_CHANNEL_ID=-1002261187486
TEST_CHANNEL_ID=-1002277761715
PUBLIC_URL=https://efirnayalavka-aleksei57.amvera.io
```

### Docker Optimizations
- **Base:** `node:18-bullseye-slim` for compatibility
- **Native modules:** Proper compilation for better-sqlite3
- **Multi-stage build** for optimized image size
- **Health checks** for AMVERA monitoring

## ğŸ“± API Reference

### Public Endpoints
```
GET  /api/health          # AMVERA health check
GET  /api/categories      # Product categories
GET  /api/products        # Product catalog  
POST /api/cart/add        # Add to cart
POST /api/orders          # Create order
```

### Admin Endpoints (Restricted)
```
GET    /api/admin/check         # Verify admin access
POST   /api/admin/products      # Create product
PUT    /api/admin/products/:id  # Update product
DELETE /api/admin/products/:id  # Delete product
POST   /api/admin/upload        # Upload images
```

## ğŸ”’ Security & Compliance

### AMVERA Compliance âœ…
- âœ… **Proper Code/Data separation** according to AMVERA docs
- âœ… **Absolute paths** `/data/` for persistent storage
- âœ… **User data exclusion** from git repository  
- âœ… **Correct `amvera.yml`** configuration format

### Security Features
- **Telegram WebApp** cryptographic validation
- **Admin whitelist** access control by user ID
- **SQL injection protection** via prepared statements
- **File upload restrictions** by type and size
- **CORS** properly configured for Telegram

## ğŸ“Š Performance

- **Database:** SQLite WAL mode for concurrent access
- **Static serving:** Nginx with proper caching
- **Image optimization:** Compressed for fast Docker builds
- **Health monitoring:** Built-in endpoint for AMVERA

## ğŸ§ª Local Development

```bash
# Clone and setup
git clone YOUR_REPO_URL
cd efirnaya-lavka-amvera
npm install

# Configure environment  
cp .env.example .env
# Edit .env with your values

# Run with Docker
docker-compose up --build

# Test endpoints
curl http://localhost/api/health
curl http://localhost/api/categories
```

## ğŸ“š Complete Documentation

- ğŸš€ [Quick Deploy Guide](QUICK-DEPLOY.md) - Step-by-step deployment
- ğŸ“‹ [Detailed AMVERA Instructions](DEPLOYMENT-AMVERA.md)  
- âœ… [AMVERA Compliance Report](AMVERA-COMPLIANCE.md)
- ğŸ”§ [Installation Guide](INSTALL.md)
- ğŸ“± [Telegram Bot Setup](TELEGRAM_MINIAPP_SETUP.md)

## ğŸ¨ Design System

### Magical Color Palette
```css
--magical-primary: #8B4513     /* Rich Brown */
--magical-secondary: #2F4F2F   /* Dark Green */  
--magical-accent: #DAA520      /* Golden */
--magical-dark: #1a1a1a       /* Dark Background */
--magical-light: #f5f5dc       /* Beige */
```

### Typography Stack
- **Headers:** Cinzel (magical serif)
- **Body:** Cormorant Garamond (elegant)
- **UI:** System font stack for performance

## ğŸŒ Production URLs

After deployment your app will be available at:
- **Main App:** `https://efirnayalavka-aleksei57.amvera.io`
- **Health Check:** `https://efirnayalavka-aleksei57.amvera.io/api/health`
- **Admin Panel:** `https://efirnayalavka-aleksei57.amvera.io/admin.html`

## ğŸ¤ Contributing

1. Fork the repository
2. Create feature branch: `git checkout -b feature/amazing-feature`
3. Commit changes: `git commit -m 'Add amazing feature'`  
4. Push to branch: `git push origin feature/amazing-feature`
5. Open Pull Request

## ğŸ“„ License

MIT License - see [LICENSE](LICENSE) file for details.

## ğŸ™ Credits

- **AMVERA** for cloud platform
- **Telegram** for WebApp API  
- **SQLite** for reliable database
- **Node.js** community
- **Docker** for containerization

---

**ğŸŒŸ Made with magic for AMVERA cloud deployment** âœ¨

*Ready for production! Deploy and start selling magical products!* ğŸš€